# 导入数据

<font color=gray>导入其他平台的记账数据</font>

数据导入可以将其他平台导出的数据转换成一羽记账的数据并保存。

> [最新版本下载 (Android)](https://www.coolapk.com/apk/kylec.me.lightbookkeeping)

此文档仅适用于最新版本，最低支持[**Android v5.0**](https://www.coolapk.com/apk/kylec.me.lightbookkeeping)版本，请[升级到最新版后再使用](https://www.coolapk.com/apk/kylec.me.lightbookkeeping)

## 支持导入的账单类型

从[**Android v4.1.6**](https://www.coolapk.com/apk/kylec.me.lightbookkeeping)开始，支持导入转账类型的账单。

- 收入
- 支出
- 转账（仅部分平台支持）

其他类型暂不支持导入，所以部分账单数据可能无法导入。

## 导入形式

### 模板导入（推荐🍓）

!> 使用导入功能前，请确保自己使用的是[较新的版本](https://www.coolapk.com/apk/kylec.me.lightbookkeeping)！

> [下载模板](https://www.yiyujizhang.cn/template.csv)

模板导入属于万能导入方式，只需要将数据整理成模板文件所要求的格式，即可实现导入。

?> 推荐使用模板导入，支持 **收入/支出/转账** 三大类型，且兼容性更好。

下面解释`模板.csv`文件中各项数据的含义和需要注意的点，只需要将数据正确填写到相应列即可使用模板导入：

| 数据         | 含义                                                         |
| ------------ | :----------------------------------------------------------- |
| **日期**     | 账单日期；支持以下格式：<br> `2021-05-05 08:00`<br> `2021-05-05`<br> `2021/05/05 08:00`<br>  `2021/05/05`<br>  `2021年05月05日 08：00`<br> `2021年05月05日`<br>同一导入文件中日期格式必须一致，以第一条数据为准，否则会导入失败<br>月份和日可以是两位数字`[ex: 05]`也可以是一位数字`[ex: 5]` |
| **类型**     | 账单类型；仅支持`收入` `支出` `转账`，<br>其他类型暂不支持导入<br>必须是以中文文字的形式填写`[ex: 支出]` |
| **分类**     | `收入` `支出`类型的账单分类，`转账`类型不使用                |
| **金额**     | 账单/转账金额；<br>`必须为纯数字，不能含有货币符号或千位分隔符 收/支/转账请填写`**`正数`**`，填写负数金额分别表示支出退款/收入亏损[ex: 120]` |
| **账户**     | `收入` `支出`类型的账户，如果是`转账`类型，表示转出<br>`!!如果需要绑定账户，请导入前先在APP内创建同名账户!!` |
| **账户2**    | 仅`转账`类型使用，表示转入账户<br>`!!如果需要绑定账户，请导入前先在APP内创建同名账户!!` |
| **备注**     | 账单备注，填写任意文本，<br>`单条账单备注最大支持长度为80`   |
| **账单图片** | 账单图片（从[v5.6.3](https://www.coolapk.com/apk/kylec.me.lightbookkeeping)版本后支持），填写图片链接，最多支持三个，多个链接直接以英文逗号分隔，<br>例如：`https://example.png,https://example.png,https://example.png` |

### 支持直接导入的平台  :id=support-platforms

| 平台                   | 最后更新日期 | 支持类型/帮助                                                |
| ---------------------- | ------------ | ------------------------------------------------------------ |
| **微信账单**           | `2021/05/10` | `收入` `支出`[如何获取微信账单](doc/data-manage/get-wx-bill.md) |
| **支付宝账单(电脑端)** | `2021/05/10` | `收入` `支出`[如何获取支付宝账单](doc/data-manage/get-ali-bill.md#ali-pc) |
| **支付宝账单(手机端)** | `2021/06/18` | `收入` `支出`[如何获取支付宝账单](doc/data-manage/get-ali-bill.md) |
| **鲨鱼记账**           | `2020/06/28` | `收入` `支出`                                                |
| **微记账**             | `2021/05/10` | `收入` `支出`                                                |
| **有鱼记账**           | `2020/06/28` | `收入` `支出`                                                |
| **一羽记账**           | `2021/05/10` | `收入` `支出` `转账`                                         |
| **随手记**             | `2021/05/16` | `收入` `支出`                                                |
| **记账鸭**             | `2021/05/16` | `收入` `支出` `转账`                                         |
| **口袋记账**           | `2021/05/17` | `收入` `支出`                                                |
| **叨叨记账**           | `2021/05/17` | `收入` `支出`                                                |
| **钱迹**               | `2022/12/04` | `收入` `支出` `转账`                                         |
| **Timi记账**           | `2021/05/16` | `收入` `支出`                                                |

如果发现有过时不能使用的话，可以联系`kylec47@qq.com`及时更新。

!> 以上平台的导出文件，如果是`.csv`格式，可以直接选择导入到一羽记账，无需做其他整理。<br>如果是`.xls`/`.xlsx`格式的文件，还需要先**另存为**`.csv`格式后再进行导入。 另存为.csv格式，不要直接改后缀，请任一使用如下两种方式：<br>![导入 - exceltocsv1](https://z3.ax1x.com/2021/06/18/RpwtYj.png)<br>![导入 - exceltocsv2](https://z3.ax1x.com/2021/06/18/Rpwapn.png)

如果需要其他平台的支持`(过分小众的就算啦，成本太大啦^O^，且容易造成不好的影响，可以使用`**`模板`**`哦)`，可以发送该平台的导出文件样例到`kylec47@qq.com`，样例中至少提供收入、支出、转账三种类型的数据各一项，会在收到后尽快安排在临近版本加入。

### 截图导入（[Android v5.0](https://www.coolapk.com/apk/kylec.me.lightbookkeeping)新增）

通过OCR识别账单流水截图并自动导入账单，使用方式请[查看这里](doc/pro/ocr-import.md)。

## 导入方式  :id=import-way

### 文件打开方式（推荐🍓）

?> iOS版本暂不支持此方式

!> 使用导入功能前，请确保自己使用的是[较新的版本](https://www.coolapk.com/apk/kylec.me.lightbookkeeping)！

通过在系统文件管理器、微信、QQ等方式选择文件并以【**导入到一羽**】方式打开文件，即可进入数据导入的界面，并自动解析该文件。

>  如果通过微信、QQ等方式无法解析文件的话，请使用`系统文件管理器`

下面以系统文件管理器为例，介绍具体的导入流程：

1. 打开系统的文件管理器，选择要导入的账单文件（.csv格式）
2. 点击或长按文件，选择【**用其他应用打开**】（根据手机而定，如果没有可跳过这步）

![导入 - 导入到一羽](https://z3.ax1x.com/2021/06/18/Rp0Ivq.jpg)

3. 在文件打开方式的系统弹框中，选择【**导入到一羽】**

![导入 - 其他应用打开](https://z3.ax1x.com/2021/06/18/Rp0tHO.jpg)

4. 之后便会自动打开一羽记账，此时一羽会尝试解析选择的导入文件，并自动识别导入文件所在的平台（[已支持的平台](#support-platforms)）。导入文件解析成功后，选择需要导入到的账本（如果启用了多账本功能）。请确保导入文件已被支持，否则无法导入。

![导入 - 自动识别](https://z3.ax1x.com/2021/06/18/R9S1JK.jpg)

5. 点击`开始导入`按钮，一羽记账会解析导入文件的账单数据，在解析完成后，会将即将导入的数据展示出来，确认无误后，点击`确认导入`按钮保存本次的导入数据。（再次提醒：如果需要账单绑定账户，请务必在导入前先在APP中创建同名账户）

![导入结果预览](https://z3.ax1x.com/2021/09/02/hrHIHA.png)

### 直接选择

通过直接在应用内打开文件选择界面，并选择需要的导入文件。**不推荐使用此方式**，因为在系统的文件选择器中找文件相对来说不方便，并且在其他应用私有目录下的文件无法获取（Android11及以上）。

选择导入文件后，即可进入导入界面。

!> 部分机型可能存在`在系统文件管理器中以文件打开方式导入`时，提示无法解析文件，这个时候可以通过在一羽记账内使用`直接选择文件`的方式来导入。

## 部分账单无法导入的原因  :id=nonsupport-import

导入数据时，在预览时可能会看到`读取到100条，可导入98条`这样的信息，以下情况均会导致出现这种情况：

- 类型不支持，目前仅支持收入/支出/转账类型导入
- 转账类型账户异常，转入或转出账户残缺
- 转账类型账户异常，转入和转出账户相同
- 金额数据异常，无法转换数值
- 日期格式错误或不支持，无法转换
- 导出数据中，转账分两条数据，无法正确识别出完整转账
- 导出数据中，收支类型无分类信息

如果遇到了除以上之外的情况，欢迎补充~

## 为什么绑定账户需要提前手动创建账户？

因为自动创建账户不够精确，尤其是在常规账户修改了名称时，自动创建无法正确匹配账户类型，那么就会自动归为其他类型的账户，这就导致了自动创建出的账户是不尽如人意的。而且自动创建账户会导致导入过程需要更多的时间且变得不稳定。