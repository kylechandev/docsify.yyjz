# 备份恢复

<font color=gray>备份与还原应用的所有数据</font>

## 这很重要

!> 请务必使用该功能，数据无价，认真对待自己的数据！

> [最新版本下载(Android)](https://www.coolapk.com/apk/247977)

## 本地备份(Android)

### 应用私有目录(Android)

由于从Android10开始的限制，为了更好的保护用户的隐私，应用无法直接访问除`应用私有目录`外的任何文件，所以备份文件默认会存放在`应用私有目录`，即`Android/data/data/kylec.me.lightbookkeeping`文件夹下。

!> **请格外注意**，应用私有目录下的文件将在`清除应用数据`或`卸载应用`时同时被删除！若你**自己不愿意**使用云备份，请务必注意妥善保管这些备份文件。

从Android11开始，手机用户无法直接访问`Android/data`下的文件了，不过部分手机支持跳转到安卓存储访问框架来查看。对于此现象，你可以参考使用下面的方案作为代替：

### 授权目录(Android)

为了更好的管理本地备份文件，你可以选择授权一个目录给一羽记账使用。

在备份与恢复界面，点击页面列表中的`存放目录`，将会打开系统的目录选择界面，然后你可以选择一个目录（建议新建一个专门的目录给一羽记账）并授权给一羽记账，之后的备份文件就会保存到该目录中了。

?> 保存在授权目录中的文件，会持久的存储在你的设备中，即使清除应用数据或卸载。<br>当你重新安装一羽记账后，只需重新将该目录授权给一羽记账，即可恢复过往的备份数据。

### 本地备份文件(Android)

#### 自动备份文件

自动备份默认开启，永远只保留一份自动备份文件`YiYu_backup_Auto`

#### 手动备份文件

保存在`Manual`目录中，手动备份的数据文件不会覆盖，同一时间可以存在多个备份文件。

## WebDAV云备份（推荐🍓） :id=cloud-backup

> 推荐使用国内的[坚果云云盘](https://www.jianguoyun.com/)

将备份数据上传到个人的WebDAV云盘，如果还没有使用过WebDAV云盘，可以先了解一下[坚果云](https://www.jianguoyun.com/)，国内目前好像也只有坚果云网盘支持WebDAV协议。一羽记账内也有[坚果云官方授权教程](http://help.jianguoyun.com/?p=2064)，根据教程一步步操作，3分钟简单配置一下即可。

其他的云盘，像自建的也可以使用，只要支持WebDAV协议就行。同时国外有一个支持WebDAV协议的云盘[TeraCLOUD](https://teracloud.jp/en/)，有需要的可以到官网注册使用，免费10GB的空间。

如果之前没有接触过WebDAV备份的，也许会觉得这很麻烦，但是使用WebDAV云盘备份，所有的数据都只经过自己，安全性可谓最高了，只是便捷性略差那么一点。所以，就当是以便捷性换取绝对的安全吧~

> [**一羽记账&坚果云WebDAV配置教程**](/doc/data-manage/jianguoyun.md)

将WebDAV云盘链接到一羽记账，需要输入：

- **WebDAV Url**
- **授权账户**
- **授权密码**

!> 输入授权密码时，请不要输入坚果云的账号密码，而要输入在[**坚果云**](http://help.jianguoyun.com/?p=2064)中为一羽记账创建的独立的**应用密码**。 <br><br>（或者是使用的其他支持WebDAV的云盘，如果你使用的云盘不用单独创建应用，那么可以输入云盘账号密码）

### 云盘备份文件

#### 自动备份文件

以`月`为单位，按`月`覆盖，也就是一个月内只会存在一份备份文件。

#### 手动备份文件

以`天`为单位，按`天`覆盖，也就是一天内只会存在一份备份文件。

### 自动云备份策略  :id=cloud-backup-strategy

从[**Android v4.0**](https://www.coolapk.com/apk/kylec.me.lightbookkeeping)版本开始，支持设置云自动备份策略。<font color=orange>（此功能为Pro功能）</font>

!> 开启自动云备份策略后，<br>只有`据上一次备份的时间间隔，数据操作次数，据上一次App启动时间`在满足策略条件后才真正执行备份文件上传。<br>策略开启后，不是每次打开应用都会进行云备份。所以，在极端情况下，可能存在部分数据没来得及进行备份，但最多不超过8条账单。所以请根据自身使用情况来决定是否需要开启策略。

## 恢复备份

无论是本地备份文件，还是WebDAV云备份文件，恢复备份后都需要重启APP后才能使数据生效（恢复成功后会自动重启）。

备份文件分为**自动**和**手动**，文件名分别以`Manual`和`Auto`结尾。

备份文件列表以时间降序排序，最近的备份文件会优先展示。

## 应用内删除备份文件

在备份文件列表中，长按任一需要删除的备份文件，将会弹出删除选项。

## 分享备份文件(Android)

在备份文件列表中，点击最右侧的分享按钮，即可跳转分享。

> 分享仅适用于本地备份文件<br>
> 一羽记账不会主动进行该操作，只是因为私有目录下的备份文件在系统文件管理器中获取不是很方便，分享备份文件的目的就是帮助大家更轻松的拿到本地备份文件，仅此而已。

## 重要申明

**一羽记账非常重视数据的保存**，已在「个人中心界面」「备份与恢复操作过程」「登录注册界面」都警示了备份的重要性，并详细解释了各类备份的形式。如果再因`个人操作失误`或`不备份`等导致的数据丢失问题，一羽记账可不负责了哦！

看到这里，十分感谢你的理解！

最后，建议你务必使用[云备份](#cloud-backup)，因为数据是无价的！